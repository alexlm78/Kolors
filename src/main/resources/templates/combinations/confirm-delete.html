<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Confirmar Eliminación - Kolors</title>
   <style>
      * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
      }

      body {
         font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
         background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
         min-height: 100vh;
         padding: 20px;
         display: flex;
         align-items: center;
         justify-content: center;
      }

      .container {
         max-width: 600px;
         width: 100%;
         background: white;
         border-radius: 15px;
         box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
         overflow: hidden;
      }

      .header {
         background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
         color: white;
         padding: 30px;
         text-align: center;
      }

      .header h1 {
         font-size: 2rem;
         margin-bottom: 10px;
         font-weight: 300;
      }

      .header p {
         opacity: 0.9;
         font-size: 1.1rem;
      }

      .content {
         padding: 30px;
      }

      /* Navigation */
      .nav-back {
         margin-bottom: 20px;
      }

      .nav-back a {
         color: #667eea;
         text-decoration: none;
         font-weight: 600;
         display: inline-flex;
         align-items: center;
         gap: 8px;
      }

      .nav-back a:hover {
         text-decoration: underline;
      }

      /* Warning Section */
      .warning-section {
         background: #fff3cd;
         border: 1px solid #ffeaa7;
         border-radius: 10px;
         padding: 25px;
         margin-bottom: 30px;
         text-align: center;
      }

      .warning-icon {
         font-size: 3rem;
         color: #856404;
         margin-bottom: 15px;
      }

      .warning-title {
         font-size: 1.5rem;
         font-weight: 700;
         color: #856404;
         margin-bottom: 15px;
      }

      .warning-message {
         color: #856404;
         font-size: 1.1rem;
         line-height: 1.5;
      }

      /* Combination Preview */
      .combination-preview {
         background: #f8f9fa;
         padding: 25px;
         border-radius: 10px;
         margin-bottom: 30px;
         text-align: center;
      }

      .combination-name {
         font-size: 1.8rem;
         font-weight: 700;
         color: #495057;
         margin-bottom: 15px;
      }

      .combination-meta {
         color: #6c757d;
         font-size: 1rem;
         margin-bottom: 20px;
      }

      .combination-colors {
         display: flex;
         justify-content: center;
         gap: 15px;
         margin-bottom: 20px;
         flex-wrap: wrap;
      }

      .color-box {
         width: 80px;
         height: 80px;
         border-radius: 10px;
         border: 2px solid #e9ecef;
         box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
         position: relative;
      }

      .color-hex {
         position: absolute;
         bottom: -25px;
         left: 50%;
         transform: translateX(-50%);
         font-size: 0.8rem;
         color: #6c757d;
         font-family: 'Courier New', monospace;
         white-space: nowrap;
      }

      /* Action Buttons */
      .action-buttons {
         display: flex;
         gap: 15px;
         justify-content: center;
         flex-wrap: wrap;
      }

      .btn {
         padding: 15px 30px;
         border: none;
         border-radius: 8px;
         font-size: 16px;
         font-weight: 600;
         cursor: pointer;
         transition: all 0.3s ease;
         text-decoration: none;
         display: inline-block;
         text-align: center;
         min-width: 150px;
      }

      .btn-danger {
         background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
         color: white;
      }

      .btn-danger:hover {
         transform: translateY(-2px);
         box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
      }

      .btn-secondary {
         background: #6c757d;
         color: white;
      }

      .btn-secondary:hover {
         background: #5a6268;
         transform: translateY(-2px);
         box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
      }

      /* Confirmation Form */
      .confirmation-form {
         background: white;
         padding: 25px;
         border-radius: 10px;
         border: 1px solid #e9ecef;
         margin-bottom: 20px;
      }

      .confirmation-checkbox {
         display: flex;
         align-items: center;
         gap: 10px;
         margin-bottom: 20px;
         padding: 15px;
         background: #f8f9fa;
         border-radius: 8px;
      }

      .confirmation-checkbox input[type="checkbox"] {
         width: 20px;
         height: 20px;
         cursor: pointer;
      }

      .confirmation-checkbox label {
         cursor: pointer;
         font-weight: 500;
         color: #495057;
      }

      .delete-button {
         opacity: 0.5;
         cursor: not-allowed;
         transition: all 0.3s ease;
      }

      .delete-button.enabled {
         opacity: 1;
         cursor: pointer;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
         .container {
            margin: 10px;
            border-radius: 10px;
         }

         .header {
            padding: 20px;
         }

         .header h1 {
            font-size: 1.5rem;
         }

         .content {
            padding: 20px;
         }

         .combination-name {
            font-size: 1.5rem;
         }

         .combination-colors {
            gap: 10px;
         }

         .color-box {
            width: 60px;
            height: 60px;
         }

         .action-buttons {
            flex-direction: column;
         }

         .btn {
            width: 100%;
            min-width: auto;
         }
      }

      @media (max-width: 480px) {
         body {
            padding: 10px;
         }

         .warning-icon {
            font-size: 2rem;
         }

         .warning-title {
            font-size: 1.2rem;
         }

         .combination-colors {
            flex-direction: column;
            align-items: center;
         }
      }
   </style>
</head>

<body>
   <div class="container">
      <div class="header">
         <h1>Confirmar Eliminación</h1>
         <p>Esta acción no se puede deshacer</p>
      </div>

      <div class="content">
         <!-- Navigation -->
         <div class="nav-back">
            <a th:href="@{/combinations/{id}(id=${combination.id})}">← Volver a detalles</a>
         </div>

         <!-- Warning Section -->
         <div class="warning-section">
            <div class="warning-icon">⚠️</div>
            <div class="warning-title">¿Estás seguro?</div>
            <div class="warning-message">
               Estás a punto de eliminar permanentemente esta combinación de colores.
               Esta acción no se puede deshacer y perderás todos los datos asociados.
            </div>
         </div>

         <!-- Combination Preview -->
         <div class="combination-preview">
            <div class="combination-name" th:text="${combination.name}">Nombre de la Combinación</div>
            <div class="combination-meta">
               <span th:text="${combination.colorCount}">2</span> colores •
               Creada el <span
                  th:text="${#temporals.format(combination.createdAt, 'dd/MM/yyyy HH:mm')}">01/01/2024</span>
            </div>

            <div class="combination-colors">
               <div th:each="color : ${combination.colors}" style="position: relative; display: inline-block;">
                  <div class="color-box" th:style="'background-color: #' + ${color.hexValue}"></div>
                  <div class="color-hex" th:text="'#' + ${color.hexValue}">#FF5733</div>
               </div>
            </div>
         </div>

         <!-- Confirmation Form -->
         <div class="confirmation-form">
            <div class="confirmation-checkbox">
               <input type="checkbox" id="confirmDelete" name="confirmDelete">
               <label for="confirmDelete">
                  Entiendo que esta acción es permanente y no se puede deshacer
               </label>
            </div>

            <form th:action="@{/combinations/{id}/delete(id=${combination.id})}" method="post" id="deleteForm">
               <div class="action-buttons">
                  <button type="submit" class="btn btn-danger delete-button" id="deleteButton" disabled>
                     Eliminar Definitivamente
                  </button>
                  <a th:href="@{/combinations/{id}(id=${combination.id})}" class="btn btn-secondary">
                     Cancelar
                  </a>
               </div>
            </form>
         </div>
      </div>
   </div>

   <script>
      document.addEventListener('DOMContentLoaded', function () {
         const confirmCheckbox = document.getElementById('confirmDelete');
         const deleteButton = document.getElementById('deleteButton');
         const deleteForm = document.getElementById('deleteForm');

         // Enable/disable delete button based on checkbox
         confirmCheckbox.addEventListener('change', function () {
            if (this.checked) {
               deleteButton.disabled = false;
               deleteButton.classList.add('enabled');
            } else {
               deleteButton.disabled = true;
               deleteButton.classList.remove('enabled');
            }
         });

         // Double confirmation on form submit
         deleteForm.addEventListener('submit', function (e) {
            if (!confirmCheckbox.checked) {
               e.preventDefault();
               alert('Debe confirmar que entiende que esta acción es permanente');
               return;
            }

            const combinationName = document.querySelector('.combination-name').textContent;
            const finalConfirm = confirm(
               `¿Está absolutamente seguro de que desea eliminar la combinación "${combinationName}"?\n\n` +
               'Esta acción NO se puede deshacer.'
            );

            if (!finalConfirm) {
               e.preventDefault();
            }
         });

         // Prevent accidental form submission with Enter key
         document.addEventListener('keydown', function (e) {
            if (e.key === 'Enter' && e.target.type !== 'submit') {
               e.preventDefault();
            }
         });
      });
   </script>
</body>

</html>